(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{eK0s:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("pVnL"));a("/zsF");var u=l(a("PArb"));a("IzEo");var n=l(a("bx4M"));a("+BJd");var m=l(a("mr32"));a("+L6B");var s=l(a("2/Rp"));a("Pwec");var f=l(a("CtXQ"));a("14J3");var i=l(a("BMrR"));a("giR+");var o=l(a("fyUT"));a("jCWc");var c=l(a("kPKH")),p=l(a("MVZn")),h=l(a("lwsE")),E=l(a("W8MJ")),y=l(a("a1gu")),g=l(a("Nsbk")),b=l(a("7W2i"));a("5NDa");var v=l(a("5rEg"));a("y8nQ");var w=l(a("Vl3Y"));a("OaEy");var M,k,F,V=l(a("2fM7")),T=r(a("q1tI")),S=a("MuoO"),x=l(a("6N1Q")),q=l(a("mtJX")),B=l(a("rS4k")),P=(V.default.Option,w.default.Item),A=v.default.TextArea,J=(M=(0,S.connect)(function(e){var t=e.email,a=e.loading;return{email:t,loading:a.models.email}}),k=w.default.create(),M(F=k(F=function(e){function t(){var e,a;(0,h.default)(this,t);for(var l=arguments.length,r=new Array(l),d=0;d<l;d++)r[d]=arguments[d];return a=(0,y.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(r))),a.state={mail:{},modalVisible:!1,users:[]},a.handSubmit=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var a=(0,p.default)({},t),r=new FormData;Object.keys(a).forEach(function(e){r.append(e,a[e])}),l({type:"email/update",payload:r})}})},a.fetchEmail=function(){var e=a.props,t=e.dispatch,l=e.form;t({type:"email/fetch",payload:{},callback:function(e){l.setFieldsValue({host:e.host,port:e.port,user:e.user,password:e.password,template:e.template}),a.setState({users:e.mail_users})}})},a.setForm=function(e){a.form=e},a.handleAdd=function(e){var t=a.props.dispatch;t({type:"email/storeEmailUser",payload:e,callback:function(){a.fetchEmail(),a.form.resetFields()}}),a.handleModalVisible(!1)},a.renderForm=function(){var e=a.props.form,t=e.getFieldDecorator;return T.default.createElement(w.default,{onSubmit:a.handSubmit,layout:"inline"},T.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},T.default.createElement(c.default,{md:6,sm:24},T.default.createElement(P,{label:"SMTP\u670d\u52a1\u5668"},t("host",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165SMTP\u670d\u52a1\u5668..."}]})(T.default.createElement(v.default,{min:1,style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165SMTP\u670d\u52a1\u5668"})))),T.default.createElement(c.default,{md:6,sm:24},T.default.createElement(P,{label:"\u7aef\u53e3"},t("port",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7aef\u53e3..."}]})(T.default.createElement(o.default,{min:1,style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u7aef\u53e3"}))))),T.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},T.default.createElement(c.default,{md:6,sm:24},T.default.createElement(P,{label:"\u7528\u6237\u540d"},t("user",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d..."}]})(T.default.createElement(v.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})))),T.default.createElement(c.default,{md:6,sm:24},T.default.createElement(P,{label:"\u5bc6\u7801"},t("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d..."}]})(T.default.createElement(v.default,{prefix:T.default.createElement(f.default,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))))),T.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48},style:{marginBottom:6}},T.default.createElement(c.default,{md:12,sm:24},T.default.createElement("code",{style:{color:"darkgray"}},"\u901a\u77e5\u6a21\u677f\u652f\u6301html"))),T.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},T.default.createElement(c.default,{md:12,sm:24},T.default.createElement(P,{label:"\u6a21\u677f"},t("template",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6a21\u677f..."}]})(T.default.createElement(A,{rows:8,placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f"}))))),T.default.createElement(i.default,{gutter:{md:8,lg:24,xl:48}},T.default.createElement(c.default,{md:6,sm:24},T.default.createElement("span",{className:x.default.submitButtons},T.default.createElement(s.default,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58")))))},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.renderTag=function(e){var t=a.props.dispatch;return T.default.createElement("div",null,e&&e.map(function(e){return T.default.createElement(m.default,{style:{margin:6},key:e.id,closable:!0,onClose:function(){t({type:"email/remove",payload:e,callback:function(){a.fetchEmail()}})}},"".concat(e.username,"-").concat(e.email))}))},a}return(0,b.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){this.fetchEmail()}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalVisible,l=t.users,r={handleAdd:this.handleAdd,setForm:this.setForm,handleModalVisible:this.handleModalVisible};return T.default.createElement(T.Fragment,null,T.default.createElement(q.default,null),T.default.createElement(n.default,{style:{marginBottom:12}},T.default.createElement("div",{className:x.default.tableListForm},this.renderForm())),T.default.createElement(n.default,null,T.default.createElement("h2",null,"\u901a\u77e5\u7528\u6237"),T.default.createElement(u.default,{type:"horizontal"}),T.default.createElement(s.default,{type:"primary",style:{marginRight:6,marginBottom:12},onClick:function(){e.handleModalVisible(!0)}},"\u65b0\u589e\u7528\u6237"),this.renderTag(l)),T.default.createElement(B.default,(0,d.default)({formTitle:"\u65b0\u589e\u90ae\u4ef6\u7528\u6237"},r,{modalVisible:a})))}}]),t}(T.Component))||F)||F),C=J;t.default=C}}]);